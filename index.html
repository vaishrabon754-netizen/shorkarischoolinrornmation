<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>School Mobile App</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.8/index.global.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Hind+Siliguri:wght@400;600;700&display=swap');
        
        body { 
            font-family: 'Hind Siliguri', sans-serif; 
            background-color: #f3f4f6;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
        }

        /* Mobile Container: PC-‡¶§‡ßá ‡¶¶‡ßá‡¶ñ‡¶≤‡ßá‡¶ì ‡¶Æ‡ßã‡¶¨‡¶æ‡¶á‡¶≤‡ßá‡¶∞ ‡¶Æ‡¶§‡ßã ‡¶¶‡ßá‡¶ñ‡¶æ‡¶¨‡ßá */
        .app-container {
            width: 100%;
            max-width: 450px; /* Mobile Width */
            height: 100vh;
            background: #f9fafb;
            position: relative;
            display: flex;
            flex-direction: column;
            overflow: hidden;
            box-shadow: 0 0 50px rgba(0,0,0,0.1);
        }

        #welcome-screen {
            position: absolute;
            inset: 0;
            background: linear-gradient(180deg, #1e40af 0%, #3b82f6 100%);
            z-index: 1000;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            transition: transform 0.6s cubic-bezier(0.65, 0, 0.35, 1);
        }

        .section { display: none; height: 100%; overflow-y: auto; padding: 20px; padding-bottom: 100px; }
        .section.active { display: block; animation: fadeIn 0.3s ease; }
        
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

        .nav-btn.active { color: #2563eb; }
        .nav-btn.active i { transform: translateY(-5px); color: #2563eb; }
        
        .admin-controls { display: none; }
        
        /* Custom Scrollbar for mobile feel */
        .section::-webkit-scrollbar { width: 0px; }
        
        .routine-card { background: white; border-radius: 20px; border: 1px solid #eee; overflow-x: auto; }
    </style>
</head>
<body>

    <div class="app-container">
        
        <div id="welcome-screen">
            <div class="w-24 h-24 bg-white/10 rounded-3xl flex items-center justify-center mb-6 animate-bounce">
                <i class="fas fa-graduation-cap text-5xl text-white"></i>
            </div>
            <h1 class="text-3xl font-bold text-white tracking-tight">‡¶∏‡ßç‡¶Æ‡¶æ‡¶∞‡ßç‡¶ü ‡¶∏‡ßç‡¶ï‡ßÅ‡¶≤</h1>
            <p class="text-blue-100 mt-2 text-sm opacity-80 uppercase tracking-widest">Digital Learning Hub</p>
        </div>

        <header class="bg-white px-6 py-5 flex justify-between items-center shadow-sm z-50">
            <div>
                <h1 class="text-xl font-bold text-blue-900 leading-none">‡¶∏‡ßç‡¶¨‡¶æ‡¶ó‡¶§‡¶Æ!</h1>
                <p class="text-[10px] text-gray-400 font-bold mt-1 uppercase">Today: Jan 2026</p>
            </div>
            <button onclick="toggleAdminMode()" id="adminBtn" class="bg-gray-50 w-10 h-10 rounded-xl flex items-center justify-center text-gray-400">
                <i class="fas fa-shield-alt text-sm"></i>
            </button>
        </header>

        <main class="flex-1 overflow-hidden relative">
            
            <section id="home" class="section active">
                <div id="today-msg-container"></div>

                <div class="mt-8 grid grid-cols-2 gap-4">
                    <div onclick="showSection('notice')" class="bg-white p-6 rounded-[2rem] shadow-sm border border-gray-50 flex flex-col items-center">
                        <div class="w-12 h-12 bg-red-50 text-red-500 rounded-2xl flex items-center justify-center mb-3 text-xl">
                            <i class="fas fa-bullhorn"></i>
                        </div>
                        <span class="font-bold text-xs">‡¶®‡ßã‡¶ü‡¶ø‡¶∂</span>
                    </div>
                    <div onclick="showSection('routine')" class="bg-white p-6 rounded-[2rem] shadow-sm border border-gray-50 flex flex-col items-center">
                        <div class="w-12 h-12 bg-blue-50 text-blue-500 rounded-2xl flex items-center justify-center mb-3 text-xl">
                            <i class="fas fa-calendar-alt"></i>
                        </div>
                        <span class="font-bold text-xs">‡¶∞‡ßÅ‡¶ü‡¶ø‡¶®</span>
                    </div>
                </div>
            </section>

            <section id="routine" class="section">
                <h2 class="text-xl font-bold mb-5 flex items-center"><i class="fas fa-clock mr-2 text-blue-600"></i> ‡¶ï‡ßç‡¶≤‡¶æ‡¶∏ ‡¶∞‡ßÅ‡¶ü‡¶ø‡¶® (‡ß≠ ‡¶™‡¶ø‡¶∞‡¶ø‡ßü‡¶°)</h2>
                <div class="admin-controls bg-blue-600 p-5 rounded-3xl mb-6 shadow-lg shadow-blue-100 text-white">
                    <select id="rDay" class="w-full p-2 rounded-lg mb-2 text-blue-900 text-sm outline-none">
                        <option value="Saturday">‡¶∂‡¶®‡¶ø‡¶¨‡¶æ‡¶∞</option><option value="Sunday">‡¶∞‡¶¨‡¶ø‡¶¨‡¶æ‡¶∞</option><option value="Monday">‡¶∏‡ßã‡¶Æ‡¶¨‡¶æ‡¶∞</option>
                        <option value="Tuesday">‡¶Æ‡¶ô‡ßç‡¶ó‡¶≤‡¶¨‡¶æ‡¶∞</option><option value="Wednesday">‡¶¨‡ßÅ‡¶ß‡¶¨‡¶æ‡¶∞</option><option value="Thursday">‡¶¨‡ßÉ‡¶π‡¶∏‡ßç‡¶™‡¶§‡¶ø‡¶¨‡¶æ‡¶∞</option>
                    </select>
                    <div class="grid grid-cols-2 gap-2 mb-2">
                        <select id="rPeriod" class="p-2 rounded-lg text-blue-900 text-sm outline-none"><option value="p1">‡ßß‡¶Æ</option><option value="p2">‡ß®‡ßü</option><option value="p3">‡ß©‡ßü</option><option value="p4">‡ß™‡¶∞‡ßç‡¶•</option><option value="p5">‡ß´‡¶Æ</option><option value="p6">‡ß¨‡¶∑‡ßç‡¶†</option><option value="p7">‡ß≠‡¶Æ</option></select>
                        <input id="rSub" placeholder="‡¶¨‡¶ø‡¶∑‡ßü" class="p-2 rounded-lg text-blue-900 text-sm outline-none">
                    </div>
                    <input id="rTeacher" placeholder="‡¶∂‡¶ø‡¶ï‡ßç‡¶∑‡¶ï" class="w-full p-2 rounded-lg mb-3 text-blue-900 text-sm outline-none">
                    <button onclick="saveRoutine()" class="w-full bg-white text-blue-600 font-bold py-2 rounded-lg text-sm">Save Period</button>
                </div>
                <div class="routine-card">
                    <table class="w-full text-[10px] text-center border-collapse">
                        <thead class="bg-gray-50 text-gray-400">
                            <tr><th class="p-3">Day</th><th>1</th><th>2</th><th>3</th><th>4</th><th>5</th><th>6</th><th>7</th></tr>
                        </thead>
                        <tbody id="routineBody"></tbody>
                    </table>
                </div>
            </section>

            <section id="syllabus" class="section">
                <h2 class="text-xl font-bold mb-5 flex items-center"><i class="fas fa-book-open mr-2 text-indigo-600"></i> ‡¶∏‡¶ø‡¶≤‡ßá‡¶¨‡¶æ‡¶∏</h2>
                <div class="admin-controls bg-white p-5 rounded-3xl border-2 border-dashed border-indigo-100 mb-6">
                    <input id="sySub" placeholder="‡¶¨‡¶ø‡¶∑‡ßü‡ßá‡¶∞ ‡¶®‡¶æ‡¶Æ" class="w-full p-3 bg-gray-50 rounded-xl mb-3 font-bold text-sm outline-none">
                    <textarea id="syText" rows="4" placeholder="‡¶¨‡¶ø‡¶∏‡ßç‡¶§‡¶æ‡¶∞‡¶ø‡¶§ ‡¶∏‡¶ø‡¶≤‡ßá‡¶¨‡¶æ‡¶∏..." class="w-full p-3 bg-gray-50 rounded-xl mb-3 text-xs outline-none"></textarea>
                    <button onclick="saveSyllabus()" class="w-full bg-indigo-600 text-white font-bold py-3 rounded-xl text-sm">Add Syllabus</button>
                </div>
                <div id="syllabusList" class="space-y-4"></div>
            </section>

            <section id="notice" class="section">
                <h2 class="text-xl font-bold mb-5 flex items-center"><i class="fas fa-bell mr-2 text-red-600"></i> ‡¶®‡ßã‡¶ü‡¶ø‡¶∂ ‡¶¨‡ßã‡¶∞‡ßç‡¶°</h2>
                <div class="admin-controls bg-white p-5 rounded-3xl border mb-6 shadow-sm">
                    <input id="nT" placeholder="‡¶∂‡¶ø‡¶∞‡ßã‡¶®‡¶æ‡¶Æ" class="w-full p-3 bg-gray-50 rounded-xl mb-2 font-bold text-sm outline-none">
                    <textarea id="nD" placeholder="‡¶¨‡¶ø‡¶∏‡ßç‡¶§‡¶æ‡¶∞‡¶ø‡¶§..." class="w-full p-3 bg-gray-50 rounded-xl mb-3 text-xs outline-none"></textarea>
                    <button onclick="addNotice()" class="w-full bg-red-500 text-white font-bold py-3 rounded-xl text-sm">Publish</button>
                </div>
                <div id="noticeContainer" class="space-y-4"></div>
            </section>

            <section id="calendar-sec" class="section">
                <h2 class="text-xl font-bold mb-5">üìÖ ‡¶á‡¶≠‡ßá‡¶®‡ßç‡¶ü ‡¶ï‡ßç‡¶Ø‡¶æ‡¶≤‡ßá‡¶®‡ßç‡¶°‡¶æ‡¶∞</h2>
                <div id="calendar-el" class="bg-white p-3 rounded-3xl border shadow-sm text-sm"></div>
                <div id="eventModal" class="hidden fixed inset-0 bg-black/50 z-[200] flex items-center justify-center p-6">
                    <div class="bg-white w-full rounded-[2.5rem] p-6 shadow-2xl">
                        <h3 class="font-bold mb-4">New Event</h3>
                        <input type="text" id="eventTitle" placeholder="Event Name" class="w-full p-3 bg-gray-50 rounded-xl mb-2 outline-none">
                        <input type="time" id="eventTime" class="w-full p-3 bg-gray-50 rounded-xl mb-4 outline-none">
                        <div class="flex gap-2">
                            <button onclick="closeModal()" class="flex-1 py-3 bg-gray-100 rounded-xl text-gray-500 font-bold">Cancel</button>
                            <button onclick="saveEvent()" class="flex-1 py-3 bg-blue-600 text-white rounded-xl font-bold">Save</button>
                        </div>
                    </div>
                </div>
            </section>

        </main>

        <nav class="absolute bottom-0 left-0 right-0 bg-white/90 backdrop-blur-md h-20 flex justify-around items-center border-t border-gray-100 px-2 z-50">
            <button onclick="showSection('home', this)" class="nav-btn active flex-1 flex flex-col items-center transition-all">
                <i class="fas fa-house-user text-xl mb-1"></i><span class="text-[9px] font-bold">‡¶π‡ßã‡¶Æ</span>
            </button>
            <button onclick="showSection('routine', this)" class="nav-btn flex-1 flex flex-col items-center text-gray-300 transition-all">
                <i class="fas fa-calendar-day text-xl mb-1"></i><span class="text-[9px] font-bold">‡¶∞‡ßÅ‡¶ü‡¶ø‡¶®</span>
            </button>
            <button onclick="showSection('syllabus', this)" class="nav-btn flex-1 flex flex-col items-center text-gray-300 transition-all">
                <i class="fas fa-book text-xl mb-1"></i><span class="text-[9px] font-bold">‡¶∏‡¶ø‡¶≤‡ßá‡¶¨‡¶æ‡¶∏</span>
            </button>
            <button onclick="showSection('notice', this)" class="nav-btn flex-1 flex flex-col items-center text-gray-300 transition-all">
                <i class="fas fa-bullhorn text-xl mb-1"></i><span class="text-[9px] font-bold">‡¶®‡ßã‡¶ü‡¶ø‡¶∂</span>
            </button>
            <button onclick="showSection('calendar-sec', this)" class="nav-btn flex-1 flex flex-col items-center text-gray-300 transition-all">
                <i class="fas fa-star text-xl mb-1"></i><span class="text-[9px] font-bold">‡¶á‡¶≠‡ßá‡¶®‡ßç‡¶ü</span>
            </button>
        </nav>

    </div>

    <script>
        let isAdmin = false;
        const ADMIN_PASSWORD = "1234";
        let calendar;
        let selectedDate;

        // Welcome Screen dismiss
        setTimeout(() => {
            const welcome = document.getElementById('welcome-screen');
            welcome.style.transform = 'translateY(-100%)';
        }, 2500);

        document.addEventListener('DOMContentLoaded', function() {
            const calendarEl = document.getElementById('calendar-el');
            calendar = new FullCalendar.Calendar(calendarEl, {
                initialView: 'dayGridMonth',
                headerToolbar: { left: 'prev', center: 'title', right: 'next' },
                events: JSON.parse(localStorage.getItem('calendarEvents')) || [],
                dateClick: (info) => { if(isAdmin) { selectedDate = info.dateStr; document.getElementById('eventModal').classList.remove('hidden'); } },
                eventClick: (info) => { if(isAdmin && confirm('‡¶Æ‡ßÅ‡¶õ‡ßá ‡¶´‡ßá‡¶≤‡¶¨‡ßá‡¶®?')) { info.event.remove(); saveCalendarToLocal(); checkTodayEvents(); } }
            });
            calendar.render();
            checkTodayEvents(); loadRoutine(); loadSyllabus(); loadOtherData();
        });

        function showSection(id, btn) {
            document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
            document.getElementById(id).classList.add('active');
            document.querySelectorAll('.nav-btn').forEach(b => b.classList.replace('text-blue-600', 'text-gray-300'));
            if(btn) btn.classList.add('active');
            if(id === 'calendar-sec') setTimeout(() => calendar.render(), 100);
        }

        function toggleAdminMode() {
            if(!isAdmin) {
                if(prompt("Admin Password:") === ADMIN_PASSWORD) { isAdmin = true; applyAdmin(); }
                else { alert("‡¶≠‡ßÅ‡¶≤ ‡¶™‡¶æ‡¶∏‡¶ì‡ßü‡¶æ‡¶∞‡ßç‡¶°!"); }
            } else { isAdmin = false; applyAdmin(); }
        }

        function applyAdmin() {
            document.querySelectorAll('.admin-controls').forEach(el => el.style.display = isAdmin ? 'block' : 'none');
            document.getElementById('adminBtn').classList.toggle('text-blue-600', isAdmin);
            loadSyllabus(); loadOtherData();
        }

        function closeModal() { document.getElementById('eventModal').classList.add('hidden'); }

        // --- Core Functions ---
        function checkTodayEvents() {
            const today = new Date().toLocaleDateString('en-CA'), events = JSON.parse(localStorage.getItem('calendarEvents')) || [];
            const container = document.getElementById('today-msg-container');
            const todayEvents = events.filter(e => e.start.startsWith(today));
            
            if(todayEvents.length > 0) {
                container.innerHTML = todayEvents.map(e => `
                    <div class="bg-gradient-to-br from-blue-600 to-indigo-700 p-8 rounded-[2.5rem] text-white shadow-xl relative overflow-hidden mb-6">
                        <div class="relative z-10">
                            <span class="text-[9px] bg-white/20 px-3 py-1 rounded-full font-bold uppercase tracking-widest">Today's Event</span>
                            <h3 class="text-2xl font-bold mt-3">${e.title}</h3>
                        </div>
                        <i class="fas fa-bolt absolute -right-4 -bottom-4 text-white/10 text-8xl"></i>
                    </div>`).join('');
            } else {
                container.innerHTML = `
                    <div class="bg-blue-50 p-8 rounded-[2.5rem] flex flex-col items-center justify-center text-center border border-blue-100">
                        <div class="w-12 h-12 bg-blue-100 text-blue-400 rounded-full flex items-center justify-center mb-3"><i class="fas fa-smile"></i></div>
                        <p class="text-blue-900 font-bold text-sm">‡¶Ü‡¶ú ‡¶ï‡ßã‡¶®‡ßã ‡¶¨‡¶ø‡¶∂‡ßá‡¶∑ ‡¶á‡¶≠‡ßá‡¶®‡ßç‡¶ü ‡¶®‡ßá‡¶á‡•§</p>
                    </div>`;
            }
        }

        function saveRoutine() {
            const day = document.getElementById('rDay').value, period = document.getElementById('rPeriod').value;
            const sub = document.getElementById('rSub').value, teacher = document.getElementById('rTeacher').value;
            if(!sub) return;
            let routine = JSON.parse(localStorage.getItem('schoolRoutineMobile')) || {};
            if(!routine[day]) routine[day] = {};
            routine[day][period] = { sub, teacher };
            localStorage.setItem('schoolRoutineMobile', JSON.stringify(routine));
            loadRoutine();
        }

        function loadRoutine() {
            const routine = JSON.parse(localStorage.getItem('schoolRoutineMobile')) || {};
            const daysArr = ["Saturday", "Sunday", "Monday", "Tuesday", "Wednesday", "Thursday"];
            document.getElementById('routineBody').innerHTML = daysArr.map(day => {
                const dData = routine[day] || {};
                return `<tr class="border-b"><td class="p-3 bg-gray-50 font-bold text-blue-600 border-r">${day.substring(0,3)}</td>${[1,2,3,4,5,6,7].map(p => {
                    const pd = dData['p'+p] || { sub: '-', teacher: '' };
                    return `<td class="p-2 border-r text-gray-700 font-semibold">${pd.sub}</td>`;
                }).join('')}</tr>`;
            }).join('');
        }

        function saveSyllabus() {
            const subject = document.getElementById('sySub').value, text = document.getElementById('syText').value;
            if(!subject || !text) return;
            let syllabuses = JSON.parse(localStorage.getItem('detailedSyllabus')) || [];
            syllabuses.push({ subject, text });
            localStorage.setItem('detailedSyllabus', JSON.stringify(syllabuses));
            document.getElementById('sySub').value = ''; document.getElementById('syText').value = '';
            loadSyllabus();
        }

        function loadSyllabus() {
            const syllabuses = JSON.parse(localStorage.getItem('detailedSyllabus')) || [];
            document.getElementById('syllabusList').innerHTML = syllabuses.map((s, i) => `
                <div class="bg-white rounded-[2rem] shadow-sm border border-gray-100 overflow-hidden">
                    <div class="bg-indigo-50 p-5 flex justify-between items-center border-b border-indigo-50">
                        <h4 class="font-bold text-indigo-900">${s.subject}</h4>
                        <button onclick="deleteSyllabus(${i})" class="admin-controls text-red-300" style="display:${isAdmin?'block':'none'}"><i class="fas fa-trash-alt"></i></button>
                    </div>
                    <div class="p-6 text-gray-500 text-xs whitespace-pre-wrap leading-relaxed">${s.text}</div>
                </div>`).join('');
        }

        function deleteSyllabus(i) {
            let s = JSON.parse(localStorage.getItem('detailedSyllabus')); s.splice(i, 1);
            localStorage.setItem('detailedSyllabus', JSON.stringify(s)); loadSyllabus();
        }

        function addNotice() {
            const title = document.getElementById('nT').value, desc = document.getElementById('nD').value;
            if(!title) return;
            let n = JSON.parse(localStorage.getItem('notices')) || [];
            n.push({title, desc});
            localStorage.setItem('notices', JSON.stringify(n));
            loadOtherData();
        }

        function loadOtherData() {
            const notices = JSON.parse(localStorage.getItem('notices')) || [];
            document.getElementById('noticeContainer').innerHTML = notices.map((n, i) => `
                <div class="bg-white p-5 rounded-[2rem] shadow-sm border-l-4 border-red-500 flex justify-between items-start">
                    <div class="flex-1">
                        <h3 class="font-bold text-gray-800 text-sm mb-1">${n.title}</h3>
                        <p class="text-[10px] text-gray-500">${n.desc}</p>
                    </div>
                    <button onclick="deleteItem('notices', ${i})" class="admin-controls ml-4 text-red-200" style="display:${isAdmin?'block':'none'}"><i class="fas fa-times"></i></button>
                </div>`).join('');
        }

        function deleteItem(key, i) {
            let d = JSON.parse(localStorage.getItem(key)); d.splice(i, 1);
            localStorage.setItem(key, JSON.stringify(d)); loadOtherData();
        }

        function saveEvent() {
            const title = document.getElementById('eventTitle').value, time = document.getElementById('eventTime').value;
            if(title) { calendar.addEvent({ title, start: selectedDate + (time ? 'T'+time : ''), allDay: !time }); saveCalendarToLocal(); closeModal(); checkTodayEvents(); }
        }

        function saveCalendarToLocal() { const events = calendar.getEvents().map(e => ({ title: e.title, start: e.startStr, allDay: e.allDay })); localStorage.setItem('calendarEvents', JSON.stringify(events)); }
    </script>
</body>
</html>
